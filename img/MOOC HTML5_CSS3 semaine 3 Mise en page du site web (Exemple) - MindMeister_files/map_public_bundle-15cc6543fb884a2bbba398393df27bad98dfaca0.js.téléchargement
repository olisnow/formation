webpackJsonp([165,120,129],{"3R9V":function(module,exports){App.ui.Teaser={init:function(){$("teaser")&&(App.ui.Teaser.visible=!1,App.ui.Teaser.handle=$$("#teaser_handle .icon-svg")[0],Element.bindOnClick("teaser_handle",App.ui.Teaser.toggle),setTimeout(App.ui.Teaser.toggle,2e3),UI.Registry.add(this))},toggle:function(){CSS.set($("teaser"),{right:App.ui.Teaser.visible?"-263px":"5px",transitionDuration:"500ms"}),App.ui.Teaser.handle.toggleClassName("active"),App.ui.Teaser.visible=!App.ui.Teaser.visible,App.SIDEBAR_WIDTH=App.ui.Teaser.visible?280:0,UI.Registry.notify(this,App.ui.Teaser.visible?"show":"hide")}}},"4whG":function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_1__app_ui_footerPublic__=(__webpack_require__("hqmG"),__webpack_require__("geal")),__WEBPACK_IMPORTED_MODULE_2__app_ui_options__=__webpack_require__("4KFD"),__WEBPACK_IMPORTED_MODULE_3__app_ui_teaser__=__webpack_require__("3R9V"),__WEBPACK_IMPORTED_MODULE_4__app_models_userModel__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__app_ui_teaser__),__webpack_require__("gz1n")),__WEBPACK_IMPORTED_MODULE_5_tools_emojiArea__=__webpack_require__("Bp4Y");window.sideBar=null,App.ui.Footer=__WEBPACK_IMPORTED_MODULE_1__app_ui_footerPublic__.default,App.ui.Options=__WEBPACK_IMPORTED_MODULE_2__app_ui_options__.default,window.EmojiArea=__WEBPACK_IMPORTED_MODULE_5_tools_emojiArea__.a,window.User=__WEBPACK_IMPORTED_MODULE_4__app_models_userModel__.UserModel,window.users=__WEBPACK_IMPORTED_MODULE_4__app_models_userModel__.users},geal:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var likeMap=function(e){if(!ServerData.isLoggedIn){if("embedded"===App.config.viewMode)return;Event.stop(e),MM.utils.redirectToLogin(I18n.t("js.signin_to_use"))}Event.stop(e),new Ajax.Request("/maps/like",{asynchronous:!0,evalScripts:!0,parameters:{map_id:App.config.map_id,unlike:state.liked},onComplete:updateLikeButton}),state.liked=!state.liked},updateLikeButton=function(){var el=mm$("btn_like"),icon=MM.ui.icon({name:"like",size:18,color:state.liked?"white":"grey-light"});state.liked?addClassName(el,"bg-orange"):removeClassName(el,"bg-orange"),el.update(icon)},buildActionsPopover=function(){var elements=App.config.actionButtons.map(function(btn){return new Element("a",{id:"btn_"+btn,href:"#",class:"button"}).update(I18n.t("js."+btn))});elements[0].addClassName("default"),new Popover("actions",doActions).addElements(elements)},doActions=function(id){switch(id){case"btn_export":!ServerData.isLoggedIn||ServerData.user.isAnonymous?MM.utils.redirectToLogin(I18n.t("js.signin_to_use")):(canvas.prepareExport(),MM.ui.dialogs.dialogExportMap(App.config.map_id));break;case"btn_clone":!ServerData.isLoggedIn||ServerData.user.isAnonymous?MM.utils.redirectToLogin(I18n.t("js.signin_to_use")):MM.ui.dialogs.dialogClone();break;case"btn_maximize":var url="/"+tree.root.id;App.config.linkShare&&""!==App.config.linkShareToken&&(url+="/"+App.config.mapTitle+"?t="+App.config.linkShareToken),window.open(url);break;case"btn_embed":MM.ui.dialogs.show("embed_wizard",{map_id:App.config.map_id,param:"&prefered=public"})}},state={liked:!1},Footer={init:function(){if(this.el=$("map_footer"),this.el){var likeBtn=mm$("btn_like");state.liked="true"===getDataSet(likeBtn,"liked"),updateLikeButton(),likeBtn.observe("click",likeMap),Element.bindOnClick("btn_present",Presentation.togglePresenter.bind(Presentation)),App.config.actionButtons.length>0&&buildActionsPopover(),this.viewportSpace={bottom:this.el.offsetHeight},UI.Registry.add(this),UI.Registry.notify(this,"show"),MM.ui.ToolTips.touchSafe({el:this.el})}},show:function(){removeClassName(this.el,"hidden"),this._updateViewportOffset(),UI.Registry.notify(this,"show")},hide:function(){addClassName(this.el,"hidden"),this._updateViewportOffset(),UI.Registry.notify(this,"hide")},_updateViewportOffset:function(){this.viewportSpace={bottom:this.el?this.el.offsetHeight:0}}};__webpack_exports__.default=Footer}},["4whG"]);